<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | fzdwx</title><meta name=keywords content><meta name=description content="Posts - fzdwx"><meta name=author content="fzdwx"><link rel=canonical href=https://fzdwx.github.io/posts/><meta name=google-site-verification content="L5rgS5bxF6YcK3mpM-NABF2HGHw3fXwQzPCNLb4Qp8Q"><link crossorigin=anonymous href=/assets/css/stylesheet.min.78572f30d57b0e6b89bf000c11e49506c318420e6a2f436d59e98073e2b31ece.css integrity="sha256-eFcvMNV7DmuJvwAMEeSVBsMYQg5qL0NtWemAc+KzHs4=" rel="preload stylesheet" as=style><link rel=icon href=https://fzdwx.github.io/favicon.ico><link rel=apple-touch-icon href=https://fzdwx.github.io/apple-touch-icon.png><link rel=alternate type=application/rss+xml href=https://fzdwx.github.io/posts/feed.xml><script async src="https://www.googletagmanager.com/gtag/js?id=G-DGKZ9K6GHW"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-DGKZ9K6GHW",{anonymize_ip:!1})}</script><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts | fzdwx"><meta name=twitter:description content="What you say ?"><meta property="og:title" content="Posts | fzdwx"><meta property="og:description" content="What you say ?"><meta property="og:type" content="website"><meta property="og:url" content="https://fzdwx.github.io/posts/"><meta property="og:image" content="https://avatars.githubusercontent.com/u/65269574?v=4"><meta property="og:site_name" content="fzdwx"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://fzdwx.github.io/posts/"}]}</script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary-bg:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list-page{background:var(--theme)}.list-page:not(.dark)::-webkit-scrollbar-track{background:0 0}.list-page:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class="list-page type-posts kind-section layout-" id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark"),document.body.classList.add("light");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches?document.body.classList.add("dark"):document.body.classList.add("light")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="auto",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-tc-webfont@1.0.0/style.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1/style.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@4.5.11/400.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@4.5.11/400-italic.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@4.5.11/500.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@4.5.11/500-italic.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@4.5.11/700.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@4.5.11/800.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@4.5.11/700-italic.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@4.5.11/800-italic.css><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script><div class=sticky-top><div class=header-bar></div><header class=header><nav class=nav><div class=logo><a href=https://fzdwx.github.io/ accesskey=h title="fzdwx (Alt + H)">fzdwx</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><img class=logo-img src=/images/party_parrot.gif alt=logo aria-label=logo height=30 width=30></li><li><a href=https://fzdwx.github.io/notes/ title=Notes>Notes</a></li><li><a href=https://fzdwx.github.io/document/ title=Docs>Docs</a></li><li><a href=https://fzdwx.github.io/archives/ title=Archives>Archives</a></li><li><a href=https://fzdwx.github.io/links/ title=Links>Links</a></li><li><a href=https://fzdwx.github.io/search/ title="🔎 Search">🔎 Search</a></li></ul></nav></header></div><main class=main><header class=page-header><div class=breadcrumbs><a href=https://fzdwx.github.io/>Home</a></div><h1>Posts</h1><div class=inline-links><span><a href=https://fzdwx.github.io/posts/feed.xml target=_blank>RSS</a></span></div></header><article class=post-entry><header class=entry-header><h2>记录学习 jyyos 操作系统课</h2></header><section class=entry-content><p>最近也是又追起了南京大学的操作系统课(前面几次都中途放弃了)，记录一下
1. 首先就是编译第三节课的一个demo时，找不到 ld 等命令  http://jyywiki.cn/OS/2023/build/lect3.ipynb demo(‘hello-os’, ‘i/hello-os’)
由于我使用的是 archlinux, binutils 编译出来的 ld, gcc 等命令都是不带 x86 的前缀的， 而 Makefile 中定义的都是带 x86 的, 所以需要建立一个链接:
ln -s /usr/bin/ld /usr/bin/x86_64-linux-gnu-ld 来自 chatgpt 的解释: 该命令创建了一个名为“x86_64-linux-gnu-ld”的符号链接，指向“/usr/bin/ld”。这个符号链接可以被用作“x86_64-linux-gnu-ld”二进制文件的替代品。 符号链接是一种特殊的文件类型，它是一个指向另一个文件的文件，可以用来在文件系统中创建指向其他文件或目录的别名。
在Linux系统中，“/usr/bin/ld”是一个连接器（linker），用于将多个目标文件合并为单个可执行文件。通过创建“x86_64-linux-gnu-ld”的符号链接，可以使该链接器的功能可以在不同的系统上使用，并且不需要更改可执行文件的代码。 这个符号链接通常被用于交叉编译（cross-compiling）应用程序，这种情况下，应用程序在不同的硬件平台上运行。
2. 使用 vscode 等编辑器时，第一个问题的代码中头文件无法跳转 使用 bear 生成 compile_commands.json, 然后编辑器就会自动识别了
bear -- make 来自 chatgpt 的解释: 该命令使用Bear和Make工具，用于自动捕获Makefile的编译命令和编译期间的调用链。
具体来说，Bear是一个工具，它可以将系统调用跟踪器（strace）输出转换为JSON格式的文件，这个文件包含了所有运行期间的系统调用。 Make是一个工具，它用于根据Makefile规则自动构建和编译程序。
当这两个工具一起使用时，可以使用“bear – make”命令自动捕获Makefile的编译命令和编译期间的调用链，这个过程可以在后续的调试中使用。 该命令的执行将产生一个JSON格式的文件，其中包含编译期间的所有系统调用和它们的参数。这个文件可以用于调试，性能优化，以及自动化编译和构建系统的开发。
总之，“bear – make”命令可以帮助程序员更好地理解他们的代码在编译期间所做的事情，以及识别代码中的潜在问题。
3. 写一个 pstree  http://jyywiki.cn/OS/2023/labs/M1 实现思路:
扫描 /proc/ 目录下所有为数字的文件夹 读取 /proc/{pid}/status 文件 读取 name 以及 ppid 建树并打印树结构</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2023年03月05日</span></span><span class=meta-item>
<span>2023-03-05 22:27:31</span>
</span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg><span class=post-tags><a href=https://fzdwx.github.io/tags/os/>os</a><a href=https://fzdwx.github.io/tags/linux/>linux</a></span></span></footer><a class=entry-link aria-label="post link to 记录学习 jyyos 操作系统课" href=https://fzdwx.github.io/posts/2023-03-05-jyyos_c_compile/></a></article><article class=post-entry><header class=entry-header><h2>用 Rust 写的弹窗翻译软件</h2></header><section class=entry-content><p>项目地址：  https://github.com/fzdwx/popup-translation 基本原理就是通过 wry 打开一个 webview 窗口，然后打开某个翻译平台的网页翻译内容，并通过 js 代码屏蔽掉不需要的内容，专注于翻译内容本身。
弹窗示例 当前获取需要被翻译的内容是从 粘贴板 中读取的（当然也可以直接指定 fanyi hello），在 Linux(x11) 下支持直接翻译被鼠标选中的内容（即不需要复制到粘贴板中）。</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2023年02月13日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/project/>project</a><a href=https://fzdwx.github.io/tags/rust/>rust</a></span></span></footer><a class=entry-link aria-label="post link to 用 Rust 写的弹窗翻译软件" href=https://fzdwx.github.io/posts/2023-02-13-asd/></a></article><article class=post-entry><header class=entry-header><h2>使用 tmux + st</h2></header><section class=entry-content><p> st 是一个非常的简单的终端软件，它对我的来说只少一个功能，就是多路服用(上下左右切分窗口)，这在其他终端软件中都有提供，比如说 wezterm 。
而 tmux 刚好可以提供这个功能:
tmux split-window # 向下切分 tmux split-window -h # 向右切分 然后就可以在 st 中设置快捷键: Details /* 切分 */ static char *sp[] = { "/bin/sh", "-c", "tmux split-window","externalpipe", NULL }; static char *sph[] = { "/bin/sh", "-c", "tmux split-window -h","externalpipe", NULL }; /* 切换窗口 */ static char *gd[] = { "/bin/sh", "-c", "tmux select-pane -D","externalpipe", NULL }; static char *gu[] = { "/bin/sh", "-c", "tmux select-pane -U","externalpipe", NULL }; static char *gr[] = { "/bin/sh", "-c", "tmux select-pane -R","externalpipe", NULL }; static char *gl[] = { "/bin/sh", "-c", "tmux select-pane -L","externalpipe", NULL }; /* 调整窗口大小 */ static char *rd[] = { "/bin/sh", "-c", "tmux resize-pane -D 2","externalpipe", NULL }; static char *ru[] = { "/bin/sh", "-c", "tmux resize-pane -U 2","externalpipe", NULL }; static char *rr[] = { "/bin/sh", "-c", "tmux resize-pane -R 2","externalpipe", NULL }; static char *rl[] = { "/bin/sh", "-c", "tmux resize-pane -L 2","externalpipe", NULL }; static Shortcut shortcuts[] = { { ControlMask, XK_minus, externalpipe, {....</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2023年02月12日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/linux/>linux</a></span></span></footer><a class=entry-link aria-label="post link to 使用 tmux + st" href=https://fzdwx.github.io/posts/2023-02-12-tmux-st/></a></article><article class=post-entry><header class=entry-header><h2>linux 连接蓝牙耳机</h2></header><section class=entry-content><p>以 Archlinux 为例子
bluetoothctl power on # 扫描 bluetoothctl scan on # 结对 bluetoothctl pair xxx # 连接 bluetoothctl connect xxx # 设置 蓝牙为默认输出 pavucontrol 设置 蓝牙为默认输出</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2023年02月09日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/linux/>linux</a></span></span></footer><a class=entry-link aria-label="post link to linux 连接蓝牙耳机" href=https://fzdwx.github.io/posts/2023-02-09-bluetooth/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://fzdwx.github.io/images/img%201.png alt></figure><header class=entry-header><h2>自定义一个 Neovim bufferline</h2></header><section class=entry-content><p>现在比较流行的 buffer line 插件是  akinsho/bufferline ，但是我感觉他太重了，而且不好看。比如说它可以跟 lsp 集成，可以切换各种 tab/buffer 模式等,但是不一定每个人都需要，而且各个顺序都固定了，总之就是我想造轮子:  fzdwx/bufline.nvim 在 nvim 中定义 tabline 可以使用 vim.opt.tabline=xxx 来设置, 比如说下面这段代码，就很容易的实现一个 buffer line：
function _G.qweqweqwe() retrun "this is my line" end -- config vim.opt.tabline = "%!v:lua.qweqweqwe()" Show 那么接下来就很容易想到:
获取所有 buffer 获取 buffer 对应文件的信息 比如说文件名称 显示文件 icon(由  nvim-tree/nvim-web-devicons 支持) 支持高亮 如何实现的就不赘述了，如果有兴趣可以查看:  fzdwx/bufline.nvim 。 目前所有的内容都可以自定义：
M.folder -- 入参是 buffer 数量，要求返回 Group: {hl,str} M.dirName -- 入参是当前 buffer id, 要求返回 Group M.devicon -- 入参是当前 buffer id,"Sel/NoSel",是否选中, 要求返回 Group M....</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2023年02月01日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/project/>project</a><a href=https://fzdwx.github.io/tags/nvim/>nvim</a></span></span></footer><a class=entry-link aria-label="post link to 自定义一个 Neovim bufferline" href=https://fzdwx.github.io/posts/2023-02-01-bufline/></a></article><article class=post-entry><header class=entry-header><h2>Wayland下的窗口管理器： Hyprland</h2></header><section class=entry-content><p>今天简单尝试了一下  Hyprland ,它的功能类似于  DWM + picom 的组合。只是粗略的尝试了一下，发现还是有一些问题:
分屏的时候，扩展屏幕的光标不显示 设置 WLR_NO_HARDWARE_CURSORS=1 即可解决 扩展屏幕不时有一些黑块闪烁 替换安装包为 hyprland-nvidia-git 即可解决 waybar 有一点用的不爽，它的 workspaces 不是每个屏幕都是独立的(DWM 中的 tag 功能) 当然它还是有一些好处的:
不打任何补丁就有很好的可用性 自带了一些动画效果 配置文件热加载(即每次修改就会立即生效) 这一点好评，DWM 是每次修改了配置都要重新 make 但是我还是选择继续使用 DWM，因为它没有什么必须切换的理由，而且有一些我常用的功能在 Hyprland 中没有找到替代的，加上我的 DWM 的配置也趋于稳定了，也新增了可以点击的 status bar（Hyprland 下使用waybar 可以做到这个功能）。
相关代码 安装脚本:
# 安装 hyperland yay -S hyprland-nvidia-git # 安装 waybar yay -S waybar-hyprland-git # 安装 hyprland share yay -S xdg-desktop-portal-hyprland-git # 安装 rofi for wayland yay -S rofi-lbonn-wayland-git # 安装 壁纸切换 git clone https://github....</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2023年01月26日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/linux/>linux</a><a href=https://fzdwx.github.io/tags/wm/>wm</a></span></span></footer><a class=entry-link aria-label="post link to Wayland下的窗口管理器： Hyprland" href=https://fzdwx.github.io/posts/2023-01-26-hyprland/></a></article><article class=post-entry><header class=entry-header><h2>RISC-V 简介</h2></header><section class=entry-content><p>RISC-V 是一种指令集(汇编语言)，是一种 low-level 的编程语言，高级语言通过编译器编译到汇编语言</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年12月10日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/risc-v/>risc-v</a><a href=https://fzdwx.github.io/tags/os/>os</a><a href=https://fzdwx.github.io/tags/asm/>asm</a></span></span></footer><a class=entry-link aria-label="post link to RISC-V 简介" href=https://fzdwx.github.io/posts/2022-12-10-risc-v/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://fzdwx.github.io/images/14.png alt></figure><header class=entry-header><h2>隐写术</h2></header><section class=entry-content><p>最近在跟 cs61c，第一个 project 中介绍了隐写术，大意可以理解为一个文件的内容是123,在经过特定的编码转换后成了456。</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年12月07日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/fun/>fun</a></span></span></footer><a class=entry-link aria-label="post link to 隐写术" href=https://fzdwx.github.io/posts/2022-12-07-steganography/></a></article><article class=post-entry><header class=entry-header><h2>在 Obsidian 中预览 hugo</h2></header><section class=entry-content><p>前段时间玩过几天的 obsidian，由于太费神了所以转向了 hugo ,然后直接用文本编辑器写 md ，体验还是不太好，然后我想起还有 obsidian 这个软件，所以就有了这个插件。</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年12月04日</span></span><span class=meta-item>
<span>2023-03-06 20:19:02</span>
</span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg><span class=post-tags><a href=https://fzdwx.github.io/tags/obsidian/>obsidian</a><a href=https://fzdwx.github.io/tags/project/>project</a></span></span></footer><a class=entry-link aria-label="post link to 在 Obsidian 中预览 hugo " href=https://fzdwx.github.io/posts/2022-12-04-hugo-preview-obsidian/></a></article><article class=post-entry><header class=entry-header><h2>关于 git 游离分支</h2></header><section class=entry-content><p>如何在切换了分支之后恢复游离分支提交的代码。</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年10月23日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/git/>git</a></span></span></footer><a class=entry-link aria-label="post link to 关于 git 游离分支" href=https://fzdwx.github.io/posts/2022-10-23-about-git-detached-head/></a></article><article class=post-entry><header class=entry-header><h2>写一个自己的github action</h2></header><section class=entry-content><p>起因是因为想要有一种可以不用编辑文件而作用到网站上的方式，然后就了解到了 github action 的形式。</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年10月15日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/project/>project</a></span></span></footer><a class=entry-link aria-label="post link to 写一个自己的github action" href=https://fzdwx.github.io/posts/2022-10-15-about-github-action/></a></article><article class=post-entry><header class=entry-header><h2>在shell脚本中执行cd后改变main shell的路径</h2></header><section class=entry-content><p>起因 昨天晚上想用fzf与cd联动，就是fzf的结果传递给cd来执行于是有了这么一条命令:
cd $(fd --type d | fzf) 这个命令也确实能完成任务，但是问题有两个:
如果直接退出的话会回到家目录，因为$(..)的执行结果为空 每次都要输入这么多会很麻烦 用alias 然后尝试用alias来试试，所以就往.zshrc里面添加:
alias cdf="cd $(fd --type d | fzf)" 结果是直接不能运行，因为它直接识别了$(..)这一段，然后直接运行了，但是后面就不会运行。
用shell脚本 然后就写了这个文件:
#!/bin/sh path=$(fd --type d --strip-cwd-prefix --hidden --follow --exclude .git --exclude node_modules | fzf) if [ -z "$path" ]; then exit fi cd "$path" || exit 结果也是不行，后面我在最下面加了一行echo "$PWD"，我看到是执行了的，但是程序退出了就失效了。
解决 最后我搜索到可以使用source xxx或者. xxx来解决，最后是alias+shell脚本来完成这个操作的:
alias cdf="source /path/to/cdf" 同时它也解决我上面提到的两个问题。
source为什么能解决？ 之所以直接用shell脚本直接运行会不行，是因为它不是在当前shell环境中运行的，而是一个子shell，所以结果就不能改变当前的文件目录了。
而source或者.就代表着在当前的shell环境中执行，所以就能成功。
更新 2022/11/18 今天发现一种更容易解决的办法,就是在写一个 shell 方法:
function cd() { cd "$(fzf)" } 把它加入到....</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年10月11日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/linux/>linux</a><a href=https://fzdwx.github.io/tags/idea/>idea</a></span></span></footer><a class=entry-link aria-label="post link to 在shell脚本中执行cd后改变main shell的路径" href=https://fzdwx.github.io/posts/2022-10-11-about-source/></a></article><article class=post-entry><header class=entry-header><h2>Code:alias</h2></header><section class=entry-content><p>idea 目前有一个想法，是在命令行下管理脚本的工具。
例如说我有一些常用的脚本:
cd $(find . -name "*" -type d | fzf) 然后通过命令行添加
cli load "cd $(find . -name "*" -type d | fzf)" -alias cdf 然后使用cdf进行运行
cli cdf 后续 2022-10-18 22:47
刚刚找到了一个跟我这个想法很契合的项目:  https://github.com/denisidoro/navi 。
今天一晚上都在调研技术的可行性，但是都达不到我想要的效果。还是这个例子，cd $(find . -name "*" -type d | fzf)， 主要有两种思路:
在运行程序的使用利用shell的tab键盘补全，直接替换成这段命令，然后运行。比如说程序叫qwe，在shell里面输入qwe cdf&lt;TAB> ，然后就直接替换为上面的命令。我在go里面找到cobra这个包，它能动态补全命令，有点效果，但还不够，不能做到全部替换，遂搁置。 直接在程序里面运行这段命令，我试了之后还是不行，cd执行后没有生效，应该还是跟fork有关。 然后就到github里面找别人的实现，没想到找到了一个，但是试过之后还是不支持，但确实做的还不错。
想要做成我想要的效果就是实现:
在shell中补全能直接替换所有，而不是一段。 在程序中不用fork运行。 还需要在看看。</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年10月10日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/idea/>idea</a></span></span></footer><a class=entry-link aria-label="post link to Code:alias" href=https://fzdwx.github.io/posts/2022-10-10-code-alias/></a></article><article class=post-entry><header class=entry-header><h2>Raft Kv</h2></header><section class=entry-content><p>Lab2文档翻译 由于我的英文不是很好，所以使用翻译软件进行翻译，然后人工进行校对进行理解。
original地址:  https://pdos.csail.mit.edu/6.824/labs/lab-raft.html Introduction 这是一系列实验中的第一个，我们将构建一个 fault-tolerant key/value storage system 。 在本实验中我们将实现 Raft (一种复制的状态机协议)。在下一个实验中，我们将在 Raft 上构建一个 key/value service 。 然后，您将在有多个副本的状态机上进行 shard(分片？根据 key 进行 hash 来决定路由到哪个副本上) 来提高性能。
复制(replication)通过在多个复制服务器上存储其状态(即数据)的完整副本来实现 fault tolerance 。 即使有一些服务器出现 failure (崩溃或网络断开和抖动) replication 也允许它们继续运行。 挑战在于 failures 可能导致副本存在不同的数据。
Raft 将客户端的请求组织成一个序列，被称为 log ，并且确保所有 replica servers 看到相同的 log 。 每个 replica 按照日志的顺序来执行客户端的请求，将它们应用于其本地的服务状态副本(就是运行来自客户端的命令)。 由于所有存活的副本读取的日志内容都是相同的，所以都以相同的顺序来执行请求，因此它们都有相同的服务状态。 如果一个服务器发生了 failure 但是后来又 recovery (恢复) 了，Raft 会负责将它的 log 更新到最新状态。只要至少大多数的服务器还活着，并且能够继续通信， 那么 Raft 将持续运行。如果没有到达这个数量，那么 Raft 将会停止运行，直到达到这个数量才会重新开始运行。
在本 lab 中，你将把 Raft 实现为一个带有相关方法的 GO 的对象类型，目的是为了能在更大的模块中使用。 一组 Raft 实例通过 RPC 来维护 replicated logs。你的 Raft 实例将支持一连串不确定编号的 command， 也可以叫 log entries。 这些 entity 通过 index(索引)来进行编号。具有给定索引的 log entry 将被 commit， 此时，您的 Raft 应该将这条 log 发送到 larger service 上执行。...</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年10月10日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/mit6.824/>mit6.824</a><a href=https://fzdwx.github.io/tags/transaction/>transaction</a></span></span></footer><a class=entry-link aria-label="post link to Raft Kv" href=https://fzdwx.github.io/posts/2022-10-10-raftkv/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://fzdwx.github.io/images/4.png alt></figure><header class=entry-header><h2>在Abstract Machine上玩超级马里奥</h2></header><section class=entry-content><p>最近在学习 jyy 的 计算机系统基础习题课 ， 在做 pa1 的时候提 到一个运行红白机游戏的 项目 遇到的坑:
1.SIGSTKSZ 参数找不到
SIGSTKSZ参数找不到 将SIGSTKSZ修改为一个固定的参数
//uint8_t sigstack[SIGSTKSZ]; uint8_t sigstack[8192]; 2.serial 不正确
serial不正确 修改nemu/src/device/serial.c#init_serial，每个人的不同，我的是 9。</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年10月09日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/linux/>linux</a><a href=https://fzdwx.github.io/tags/ics/>ics</a></span></span></footer><a class=entry-link aria-label="post link to 在Abstract Machine上玩超级马里奥" href=https://fzdwx.github.io/posts/2022-10-09-mario-nes/></a></article><article class=post-entry><header class=entry-header><h2>GFS</h2></header><section class=entry-content><p>为了性能(Performance), 所以将数据分割放到大量的服务器上，从而实现并行的读取数据，这就是分片(Sharding)。 而成败上千的机器总会发生错误，所以有了容错(Fault Tolerance)。 实现容错最简单的方式就是复制(Replication)，其中一个发生故障了就切换另一个。 使用了复制，如果你不够小心，那么它们之间就可能会不一致。数据就有可能出现问题，所以就有了不一致的问题(Inconsistency)。 如果为了实现一致性(Consistency)，那么就需要多进行额外的交互来保证一致性，所以代价就是低性能(Low Perf) ，但这与我们开始的希望不符合。 TIP So，强一致性代表着低性能。 设计目标 由于GFS是建立在大量的计算机上的，而这些计算机会不可避免的发生故障。所以必须要进行：检查，容错以及快速从故障恢复。 主要支持大文件(例如说好几个G的文件)，同时也支持小文件但不做针对性的优化。 工作负载主要由两种类型的读取组成：大的流式读取和小的随机读取 。对于性能有过特别考虑的应用通常会作批处理并且对他们读取的内容进行排序，这样可以使得他们的读取始终是单向顺序读取，而不需要往回读取数据。 在大的流式读取中，单个操作通常要读取数百k，甚至1m或者更大的数据。对于同一个客户端来说，往往会发起连续的读取操作顺序读取一个文件。 小的随机读取通常在某个任意的偏移位置读取几kb的数据。小规模的随机读取通常在文件的不同位置，读取几k数据。 GFS中的文件通常上一旦完成写入就很少会再次修改，所以主要针对大的流式读取，同时夜支持任意位置的小规模写入操作。 GFS对多个客户端并行添加同一个文件必须要有非常有效且明确语义的支持，即原子操作。通常会有多个客户端会并行的对同一个文件进行append。 高性能的稳定带宽的网络要比低延时更加重要。我们大多数的目标应用程序都非常重视高速批量处理数据 ，而很少有人对单个读写操作有严格的响应时间要求。 架构 单个master，多个chunk server(保存具体的文件)，多个client。 每个文件被拆分为一定大小(64mb)的块(chunk)，且每个chunk有一个唯一的64位的标志(chunk handle)。 每个chunk都会在不同的chunk server上保存备份(默认是3个)，用户可以指定不同的复制级别。 master管理元数据(metadata)，例如文件到chunk的映射关系，chunk的位置信息等。 master管理chunk的分片，孤点chunk的垃圾回收机制，chunk server之间的镜像管理等 每个chunk server与master之间有心跳机制，并在检测的过程中年发出指令并收集状态。 GFS Master中的metadata filename -> chunk ids(chunk handles) NV chunk handle与chunk数据的对应关系 chunk保存在哪个服务器上(chunk server list) chunk的version no NV chunk的primary chunk server，因为写操作在在其上进行 primary chunk server的lease expiration 这两个data table都在master的内存中存放，为了容错(例如说重启后数据不丢失数据)，它会在磁盘上存储log，读取的使用从内存里面读取，写的时候会写入内存以及磁盘。 每当有数据变更时，就会在磁盘上的日志进行追加，并且定期(日志增长超过某一个大小)创建checkpoint(类似快照，不用从头开始读取)
GFS Read Steps 首先读请求就表明client有filename以及想要读取的位置(offset)，然后发送给master。 master收到请求后就从filenames中获取对应的chunk handles。而每个chunk的大小上固定的，所以就得到的具体开始的chunk handle。 然后根据chunk handle找到对应存放数据的chunk server的列表返回给client。 client可以选择一个server来进行读取(论文中说会选择一个最近的服务器，应为google里面ip是连续的，可以根据ip判断远近) ，应为客户端每次只读取1mb或者64kb的数据，所以它会缓存chunk与chunk server的关系，这样就不用每次都请求。 chunk server收到请求后，根据chunk handle(推测chunk是安装chunk handle进行命名的)找到对应的chunk以及offset对应的数据给客户端。 q1: 如果读取的数据跨越了一个chunk怎么办？ 例如说client想要读取的数据超过了64mb，或者仅仅上是2个byte却跨越了chunk，client会在发送请求时注意到这次请求跨越了边界， 所以会将一个请求拆分为2个请求发送到master，所以这里可能上向master发送两次读请求，之后在向不同的chunk server读取数据。...</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年10月07日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/gfs/>gfs</a><a href=https://fzdwx.github.io/tags/transaction/>transaction</a></span></span></footer><a class=entry-link aria-label="post link to GFS" href=https://fzdwx.github.io/posts/2022-10-07-gfs/></a></article><article class=post-entry><header class=entry-header><h2>调节linux屏幕的亮度</h2></header><section class=entry-content><p>由于使用DWM，它不能像KDE那样之间有图形化的亮度调节功能，所以记录一下。</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年10月04日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/linux/>linux</a></span></span></footer><a class=entry-link aria-label="post link to 调节linux屏幕的亮度" href=https://fzdwx.github.io/posts/2022-10-04-backlight/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://fzdwx.github.io/images/Pasted%20image%2020230126191021.png alt></figure><header class=entry-header><h2>Dwm初体验</h2></header><section class=entry-content><p>安装 git clone https://git.suckless.org/dwm cd dwm sudo make clean install 启动 如果已经有了sddm，可以使用sudo systemctl disable sddm.service 来进行关闭，如果到时候不想用了可以用sudo systemctl enable sddm.service来开启sddm。
# 准备配置文件 cp /etc/X11/xinit/xinitrc ~/.xinitrc vim ~/.xinitrc # 添加 exec dwm # 注释 #twm & #xclock -geometry 50x50-1+1 & #xterm -geometry 80x50+494+51 & #xterm -geometry 80x20+494-0 & #exec xterm -geometry 80x66+0+0 -name login 然后重启并调用startx即可。
遇到的问题 直接断网 使用NetworkManager进行连接，可能要用到dhcpcd。
nmcli device wifi list nmcli device wifi connect {{wifi name}} password {{pwd}} 可能会连接失败，你可以试试nmcli connection show 来查看是否存在以前的连接信息，可以用nmcli connection delete {{wifi name}}来删除对应的信息...</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年09月29日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/wm/>wm</a><a href=https://fzdwx.github.io/tags/linux/>linux</a></span></span></footer><a class=entry-link aria-label="post link to Dwm初体验" href=https://fzdwx.github.io/posts/2022-09-29-dwm/></a></article><article class=post-entry><header class=entry-header><h2>Neovim使用记录</h2></header><section class=entry-content><p>由于最近切换到了 linux，不可避免的经常需要使用 vi 等编辑器，所以这次好好折腾一下。</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年09月28日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/nvim/>nvim</a><a href=https://fzdwx.github.io/tags/editor/>editor</a></span></span></footer><a class=entry-link aria-label="post link to Neovim使用记录  " href=https://fzdwx.github.io/posts/2022-09-28-neovim-use-notes/></a></article><article class=post-entry><header class=entry-header><h2>HTTP协议</h2></header><section class=entry-content><p>简介HTTP/1.1与H2。</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年09月28日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/network/>network</a><a href=https://fzdwx.github.io/tags/http/>http</a><a href=https://fzdwx.github.io/tags/interview/>interview</a></span></span></footer><a class=entry-link aria-label="post link to HTTP协议" href=https://fzdwx.github.io/posts/2022-09-28-http-protocol/></a></article><article class=post-entry><header class=entry-header><h2>一个linux中的应用程序 launcher: Rofi</h2></header><section class=entry-content><p>今天发现了一个 linux 下的 application launcher  rofi ，它可以快速切换窗口和启动程序， 我用它和wmctrl进行配合使用。
我的使用过程:
1.Archlinux install
yay -S rofi 2.添加自定义快捷键绑定 hotkey 为alt+space触发rofi -show。
3.pressalt+space，然后使用shift+leftorright进行切换 mode 。
更改主题以及显示 icon:
1.生成配置文件
mkdir -p ~/.config/rofi rofi -dump-config > ~/.config/rofi/config.rasi 2.显示icon
sed -i '8c show-icons: true;' ~/.config/rofi/config.rasi 3.更换主题
参考  https://github.com/lr-tech/rofi-themes-collection#installing-themes 我的wmctrl的配置示例:
使用xprop WM_CLASS获取前缀。
alias chrome="wmctrl -x -a google-chrome || google-chrome-stable > /dev/null 2>&amp;1 &" alias note="wmctrl -x -a obsidian || /usr/bin/obsidian > /dev/null 2>&amp;1 &" alias codew="wmctrl -x -a code || /opt/code/code > /dev/null 2>&amp;1 &" alias idea="wmctrl -x -a jetbrains-idea || /opt/idea/bin/idea....</p></section><footer class=entry-footer><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>&nbsp;
<span>2022年09月18日</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://fzdwx.github.io/tags/launcher/>launcher</a><a href=https://fzdwx.github.io/tags/linux/>linux</a></span></span></footer><a class=entry-link aria-label="post link to 一个linux中的应用程序 launcher: Rofi" href=https://fzdwx.github.io/posts/2022-09-18-about-rofi/></a></article></main><footer class=footer><span>Copyright &nbsp;<a href=https://github.com/fzdwx target=_blank rel=noopener>fzdwx</a>
since 2022</span></span>
<span><a target=_blank href=https://github.com/fzdwx/fzdwx.github.io/discussions>欢迎交流</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n="1"=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script>
<script src=/js/instantclick.min.js data-no-instant></script>
<script data-no-instant>InstantClick.init()</script><script src=https://unpkg.com/lucide@latest></script>
<script>lucide.createIcons()</script><script id=douban-script>function parse(){console.log("123123"),$(".douban_item").each(function(){var e,s,i,r,c,n=$(this),t=n.attr("urlstring").toString(),o=n.attr("to").toString(),a=/^https:\/\/(movie|book)\.douban\.com\/subject\/([0-9]+)\/?/;a.test(t)&&(r=t.replace(a,"$1"),s=t.replace(a,"$2").toString(),c="https://douban.8610000.xyz/data/",r==="movie"?(e="movie"+s,i=c+s+".json",localStorage.getItem(e)==null||localStorage.getItem(e)==="undefined"?$.ajax({url:i,type:"GET",dataType:"json",success:function(s){localStorage.setItem(e,JSON.stringify(s)),movieShow(n,e,t,o)}}):movieShow(n,e,t,o)):r==="book"&&(e="book"+s,i=c+"v2/book/id/"+s,localStorage.getItem(e)==null||localStorage.getItem(e)==="undefined"?$.ajax({url:i,type:"GET",dataType:"json",success:function(i){localStorage.setItem("book"+s,JSON.stringify(i)),bookShow(n,e,t,o)}}):bookShow(n,e,t,o)))})}function movieShow(e,t,n,s){var o,a,i=localStorage.getItem(t);if(i==null||i==="undefined")return;o=JSON.parse(i),a=Math.ceil(o.rating.value),s!==void 0&&s!==""&&(n=s),o.directors.length===0&&o.directors.push({name:"未知"}),$("<div class='post-preview'><div class='post-preview--meta'><div class='post-preview--middle'><div class='post-preview--title'><a target='_blank' style='box-shadow: none; font-weight: bolder;' href='"+n+"'>"+o.title+"</a></div><div class='rating'><div class='rating-star allstar"+a+"'></div><div class='rating-average'>"+o.rating.value+"</div></div><time class='post-preview--date'>导演："+o.directors[0].name+" / 类型："+o.genres+" / "+o.year+"</time><section style='max-height:75px;overflow:hidden;' class='post-preview--excerpt'>"+o.intro.replace(/\s*/g,"")+"</section></div></div><img referrerpolicy='no-referrer' loading='lazy' class='post-preview--image' src="+o.pic.normal+"></div>").replaceAll(e)}function bookShow(e,t,n,s){var i=localStorage.getItem(t),o=JSON.parse(i),a=Math.ceil(o.rating.average);s!==void 0&&s!==""&&(n=s),$("<div class='post-preview'><div class='post-preview--meta'><div class='post-preview--middle'><div class='post-preview--title'><a target='_blank' style='box-shadow: none; font-weight: bolder;' href='"+n+"'>"+o.title+"</a></div><div class='rating'><div class='rating-star allstar"+a+"'></div><div class='rating-average'>"+o.rating.average+"</div></div><time class='post-preview--date'>作者："+o.author+" / 出版："+o.pubdate+" / "+o.publisher+" </time><section style='max-height:75px;overflow:hidden;' class='post-preview--excerpt'>"+o.summary.replace(/\s*/g,"")+"</section></div></div><img referrerpolicy='no-referrer' loading='lazy' class='post-preview--image' src="+o.images.medium+"></div>").replaceAll(e)}parse()</script></body></html>